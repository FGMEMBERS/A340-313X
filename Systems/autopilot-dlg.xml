<?xml version="1.0" encoding="UTF-8" ?>

<!-- A340 Autopilot Configuration Dialog -->


<PropertyList>

	<name>autopilot</name>
	<layout>vbox</layout>

	<text>
		<label>AUTOFLIGHT</label>
	</text>

	<hrule />

	<group>
		<layout>hbox</layout>

		<button>
			<legend>A/T Toggle</legend>
			<live type="bool">true</live>
			<binding>
				<command>nasal</command>
				<script>controls.click(3);a340.afds.input(2,5);</script>
			</binding>
				<binding>
				<command>property-assign</command>
				<property>instrumentation/afds/inputs/at-armed</property>
				<value>1</value>
			</binding>
			<binding>
				<command>property-assign</command>
				<property>instrumentation/afds/inputs/at-armed[1]</property>
				<value>1</value>
			</binding>
			<binding>
				<command>property-assign</command>
				<property>instrumentation/afds/inputs/at-armed[2]</property>
				<value>1</value>
			</binding>
			<binding>
				<command>property-assign</command>
				<property>instrumentation/afds/inputs/at-armed[3]</property>
				<value>1</value>
			</binding>
		</button>
		<text>
				<label>[A/T]</label>
				<visible>
					<equals>
						<property>instrumentation/afds/ap-modes/speed-mode</property>
						<value>SPD</value>
					</equals>
				</visible>
		</text>
	</group>
		
	<group>
		<layout>hbox</layout>
		
		<button>
			<legend>AP off</legend>
			<not><property>controls/switches/ap_master</property></not>
			<value>0</value>
			<live type="bool">true</live>
			<binding>
			<command>property-assign</command>
			<property>/controls/switches/ap_master</property>
			<value>0</value>
			</binding>
			<binding>
			<command>nasal</command>
			<script>a340.ap_off();</script>
			</binding>
		</button>
		<button>
			<legend>AP on</legend>
			<property>controls/switches/ap_master</property>
			<live type="bool">true</live>
			<binding>
			<command>property-assign</command>
			<property>/controls/switches/ap_master</property>
			<value>1</value>
			</binding>
			<binding>
			<command>property-assign</command>
			<property>/controls/switches/apoffsound</property>
			<value>0</value>
			</binding>
			<binding>
			<command>nasal</command>
			<script>a340.ap_refresh();</script>
			</binding>
		</button>
	</group>

	<group>
		<layout>vbox</layout>
		
		<group>
			<layout>hbox</layout>

			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
			<text>
				<label>Mode Indicators</label>
			</text>
			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
		</group>
		
		<group>
			<layout>hbox</layout>

			<text>
				<label>[SPD]</label>
				<visible>
					<equals>
						<property>instrumentation/afds/inputs/ias-mach-selected</property>
						<value>0</value>
					</equals>
				</visible>
			</text>

			<text>
				<label>        </label>
			</text>

			<text>
				<label>        </label>
			</text>
			
			<text>
				<label>[Mach]</label>
				<visible>
					<equals>
						<property>instrumentation/afds/inputs/ias-mach-selected</property>
						<value>1</value>
					</equals>
				</visible>
			</text>
		</group>
		
		<group>
			<layout>hbox</layout>
			<text>
				<label>[HDG]</label>
				<visible>
					<equals>
						<property>/controls/switches/aplatmode</property>
						<value>0</value>
					</equals>
				</visible>
			</text>
			<text>
				<label>[LNAV]</label>
				<visible>
					<equals>
						<property>/controls/switches/aplatmode</property>
						<value>1</value>
					</equals>
				</visible>
			</text>
			<text>
				<label>[LOC ARM]</label>
				<visible>
					<equals>
						<property>/controls/switches/loc1</property>
						<value>1</value>
					</equals>
				</visible>
			</text>
			<text>
				<label>[LOC]</label>
				<visible>
					<equals>
						<property>/controls/switches/aplatmode</property>
						<value>2</value>
					</equals>
				</visible>
			</text>
		</group>
		
		<group>
			<layout>hbox</layout>
			<text>
				<label>[ALT]</label>
				<visible>
					<equals>
						<property>/controls/switches/apvertmode</property>
						<value>0</value>
					</equals>
				</visible>
			</text>
			<text>
				<label>[VS]</label>
				<visible>
					<equals>
						<property>/controls/switches/apvertmode</property>
						<value>1</value>
					</equals>
				</visible>
			</text>
			<text>
				<label>[G/S ARM]</label>
				<visible>
					<equals>
						<property>/controls/switches/app1</property>
						<value>1</value>
					</equals>
				</visible>
			</text>
			<text>
				<label>[G/S]</label>
				<visible>
					<equals>
						<property>/controls/switches/apvertmode</property>
						<value>2</value>
					</equals>
				</visible>
			</text>
		</group>

		<group>
			<layout>hbox</layout>

			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
			<text>
				<label>Thrust Mode</label>
			</text>
			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
		</group>

		<group>
			<layout>table</layout>
			
			<text>
				<row>0</row>
				<col>0</col>
				<label>SPD:</label>
			</text>
			
			<button>
				<row>0</row>
				<col>1</col>
				<legend>SPD</legend>
				<binding>
				<command>property-assign</command>
				<property>instrumentation/afds/inputs/ias-mach-selected</property>
				<value>0</value>
				</binding>
			</button>

			<input>
				<row>0</row>
				<col>2</col>
				<property>autopilot/settings/target-speed-kt</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>

			<text>
				<row>1</row>
				<col>0</col>
				<label>Mach:</label>
			</text>

			<button>
				<row>1</row>
				<col>1</col>
				<legend>Mach</legend>
				<binding>
				<command>property-assign</command>
				<property>instrumentation/afds/inputs/ias-mach-selected</property>
				<value>1</value>
				</binding>
			</button>
			
			<input>
				<row>1</row>
				<col>2</col>
				<property>autopilot/settings/target-speed-mach</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>
		</group>

		<group>
			<layout>hbox</layout>

			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
			<text>
				<label>Lateral Mode</label>
			</text>
			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
		</group>

		<group>
			<layout>table</layout>

			<text>
				<row>0</row>
				<col>0</col>
				<label>HDG:</label>
			</text>
			
			<button>
				<row>0</row>
				<col>1</col>
				<legend>HDG</legend>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/hdg</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/nav</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/loc</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/loc1</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app1</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/aplatmode</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/aphldtrk</property>
				<value>0</value>
				</binding>
				<binding>
				<command>nasal</command>
				<script>a340.hdg_master();</script>
				</binding>
			</button>

			<input>
				<row>0</row>
				<col>2</col>
				<property>autopilot/settings/heading-bug-deg</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>
		</group>

		<group>
			<layout>hbox</layout>

			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
			<text>
				<label>Vertical Mode</label>
			</text>
			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
		</group>

		<group>
			<layout>table</layout>

			<text>
				<row>0</row>
				<col>0</col>
				<label>ALT:</label>
			</text>
			
			<button>
				<row>0</row>
				<col>1</col>
				<legend>ALT</legend>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/alt</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/vs</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app1</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/apvertmode</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/apilsmode</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/aphldtrk2</property>
				<value>0</value>
				</binding>
				<binding>
				<command>nasal</command>
				<script>a340.alt_master();</script>
				</binding>
			</button>

			<input>
				<row>0</row>
				<col>2</col>
				<property>autopilot/settings/target-altitude-ft</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>

			<text>
				<row>1</row>
				<col>0</col>
				<label>VS:</label>
			</text>
			
			<button>
				<row>1</row>
				<col>1</col>
				<legend>VS</legend>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/alt</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/vs</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app1</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/apvertmode</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/apilsmode</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/aphldtrk2</property>
				<value>0</value>
				</binding>
				<binding>
				<command>nasal</command>
				<script>a340.vs_master();</script>
				</binding>
			</button>

			<input>
				<row>1</row>
				<col>2</col>
				<property>autopilot/settings/vertical-speed-fpm</property>
				<live type="bool">true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</input>
		</group>

		<group>
			<layout>hbox</layout>
		</group>
		
		<group>
			<layout>hbox</layout>

			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
			<text>
				<label>NAV/LOC Modes</label>
			</text>
			<hrule>
				<stretch type="bool">true</stretch>
			</hrule>
		</group>
		
		<group>
			<layout>hbox</layout>
			
			<button>
				<legend>LNAV</legend>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/hdg</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/nav</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/loc</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/loc1</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app1</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/aplatmode</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/aphldtrk</property>
				<value>1</value>
				</binding>
				<binding>
				<command>nasal</command>
				<script>a340.nav_master();</script>
				</binding>
			</button>
			
			<button>
				<legend>LOC</legend>
				<binding>
				<command>property-assign</command>
				<property>instrumentation/nav/signal-quality-norm</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/hdg</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/nav</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/loc</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/loc1</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/apilsmode</property>
				<value>0</value>
				</binding>
			</button>
			
			<button>
				<legend>APPR</legend>
				<binding>
				<command>property-assign</command>
				<property>instrumentation/nav/signal-quality-norm</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/hdg</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/nav</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/loc</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/loc1</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>instrumentation/nav/gs-rate-of-climb</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/alt</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/vs</property>
				<value>0</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/app1</property>
				<value>1</value>
				</binding>
				<binding>
				<command>property-assign</command>
				<property>controls/switches/apilsmode</property>
				<value>1</value>
				</binding>
			</button>
			
		</group>

		<hrule />

		<button>
			<legend>Close</legend>
			<binding>
				<command>dialog-apply</command>
			</binding>
			<binding>
				<command>dialog-close</command>
			</binding>
		</button>
	</group>

</PropertyList>
